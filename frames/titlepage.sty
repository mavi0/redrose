% This is the title page
\setbeamercolor{section in toc}{fg=white}
\setbeamercolor{subsection in toc}{fg=grey}
\setbeamercolor{frametitle}{fg=white}


\setbeamertemplate{frametitle}{%
  \nointerlineskip%
    \begin{beamercolorbox}[wd=\paperwidth,ht=3.8ex,dp=0.6ex]{frametitle}
      \changefontsizes{8pt}

      \large{\hspace{.1cm} \insertframetitle }

      \color{grey}
      \vspace{-.07cm}

      \small\emph{\hspace{.0cm} \insertframesubtitle}%
    \end{beamercolorbox}%
    \vspace{.2cm}
}
\setbeamertemplate{background}{

  \ifnum\thepage>1\relax
    \begin{tikzpicture}

      \useasboundingbox (-1,0) rectangle(\the\paperwidth,\the\paperheight);

      \if@asFANS
              \fill[blackish,opacity=1] (-1,0) -- (1.1\paperwidth,0) -- (1.1\paperwidth,1.1\paperheight) -- (-1,1.1\paperheight);

              \node[thick, darkgrey,circle] (a) at (.5\paperwidth,.1\paperheight) {};
              \node[thick, darkgrey,circle] (b) at (.7\paperwidth,.2\paperheight) {};
              \node[thick, darkgrey,circle] (c) at (.5\paperwidth,.4\paperheight) {};
              \node[thick, darkgrey,circle] (d) at (.7\paperwidth,.5\paperheight) {};
              \draw[thick, darkgrey] (a) -- (b) -- (d) -- (c) -- (a);
              \node[thick, darkgrey,circle,] (e) at (.8\paperwidth,.6\paperheight) {};
              \node[thick, darkgrey,circle] (f) at (.85\paperwidth,.55\paperheight) {};
              \draw[thick, darkgrey] (d) -- (e) -- (f) -- (b);
              \node[thick, darkgrey,circle] (g) at (.875\paperwidth,.8\paperheight) {};
              \draw[thick, darkgrey] (e) -- (g) -- (f);
              \node[thick, darkgrey,circle,] (h) at (.55\paperwidth,.65\paperheight) {};
              \node[thick, darkgrey,circle,] (i) at (.75\paperwidth,.75\paperheight) {};
              \draw[thick, darkgrey] (d) -- (h) -- (i) -- (g);
              \draw[thick, darkgrey] (d) -- (i) -- (e);
              \draw[thick, darkgrey] (c) -- (h);

              \node[thick, darkgrey,circle] (j) at (.5\paperwidth,.9\paperheight) {};
              \draw[thick, darkgrey] (h) -- (j) -- (i);

              \node[thick, darkgrey,circle] (k) at (.75\paperwidth,.9\paperheight) {};
              \draw[thick, darkgrey] (j) -- (k) -- (i);

              \node[thick, darkgrey,circle] (l) at (.8\paperwidth,1.1\paperheight) {};
              \draw[thick,darkgrey] (k) -- (l) -- (g);
              \draw[thick,darkgrey] (k)  -- (g);
              \node[thick, darkgrey,circle] (m) at (.3\paperwidth,.6\paperheight) {};
              \draw[thick, darkgrey] (h) -- (m) -- (c);

              \node[thick, darkgrey,circle] (n) at (.2\paperwidth,.05\paperheight) {};
              \draw[thick, darkgrey] (c) -- (n) -- (a);
              \node[thick, darkgrey,circle] (o) at (.6\paperwidth,-.1\paperheight) {};
              \draw[thick,darkgrey] (a) -- (o) -- (b) ;
              \draw[thick,darkgrey] (o) -- (n) ;

              \node[thick, grey,circle] (p) at (.95\paperwidth,.45\paperheight) {};
              \node[thick, grey,circle] (q) at (.95\paperwidth,.15\paperheight) {};
              \node[thick, grey,circle] (r) at (1.1\paperwidth,.8\paperheight) {};
              \draw[thick,darkgrey] (b) -- (p) -- (f);
              \draw[thick,darkgrey] (p) -- (g);
              \draw[thick,darkgrey] (b) -- (q);
              \draw[thick,darkgrey] (l)--  (r) -- (g);
              \draw[thick,darkgrey] (n) -- (m) -- (j);
            \else
              \node[opacity=.05,anchor=south east] at (0.45\paperwidth,.085\paperheight) {\includegraphics[height=0.8\paperheight]{img/coat_of_arms_grey.png}};
        \fill[darkgrey,opacity=1,anchor=north] (-1,\paperheight) -- (1\paperwidth,\paperheight) -- (1\paperwidth,.8775\paperheight) -- (-1,.8775\paperheight);
        \fill[grey,opacity=1,anchor=north] (-1,\paperheight) -- (1\paperwidth,\paperheight) -- (1\paperwidth,.906\paperheight) -- (-1,.906\paperheight);
        \fi
      \fill[red,opacity=1,anchor=north] (-1,\paperheight) -- (1\paperwidth,\paperheight) -- (1\paperwidth,.915\paperheight) -- (-1,.915\paperheight);
      %\node[white, anchor=south west] at (.725\paperwidth,0){\includegraphics[width=0.3\textwidth]{img/scc_logo.png}};
      %\node[white, anchor=south west] at (0,.876\paperheight){\hfill{\tiny SCC.\Module: \inserttitle}};

    \end{tikzpicture}
  \fi
}
\setbeamertemplate{title page}{
  \begin{tikzpicture}

    \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    %\node[white, anchor=north west] at (.647\paperwidth,.0715\textwidth){\includegraphics[width=0.3\textwidth]{img/scc_logo.png}};

    \ifnum\thepage=1
            \node[grey,anchor=south west,inner sep=0] at (6.1,1.3) {\centering

            };
            \if@asFANS
              \fill[blackish,opacity=1] (-1,0) -- (1.1\paperwidth,0) -- (1.1\paperwidth,1.1\paperheight) -- (0,1.1\paperheight);

              \node[thick, grey,circle] (a) at (.5\paperwidth,.1\paperheight) {};
              \node[thick, grey,circle] (b) at (.7\paperwidth,.2\paperheight) {};
              \node[thick, grey,circle] (c) at (.5\paperwidth,.4\paperheight) {};
              \node[thick, grey,circle] (d) at (.7\paperwidth,.5\paperheight) {};
              \draw[thick, grey] (a) -- (b) -- (d) -- (c) -- (a);
              \node[thick, grey,circle,] (e) at (.8\paperwidth,.6\paperheight) {};
              \node[thick, grey,circle] (f) at (.85\paperwidth,.55\paperheight) {};
              \draw[thick, grey] (d) -- (e) -- (f) -- (b);
              \node[thick, grey,circle] (g) at (.875\paperwidth,.8\paperheight) {};
              \draw[thick, grey] (e) -- (g) -- (f);
              \node[thick, grey,circle,] (h) at (.55\paperwidth,.65\paperheight) {};
              \node[thick, grey,circle,] (i) at (.75\paperwidth,.75\paperheight) {};
              \draw[thick, grey] (d) -- (h) -- (i) -- (g);
              \draw[thick, grey] (d) -- (i) -- (e);
              \draw[thick, grey] (c) -- (h);

              \node[thick, grey,circle,fill] (j) at (.5\paperwidth,.9\paperheight) {};
              \draw[thick, grey] (h) -- (j) -- (i);

              \node[thick, grey,circle] (k) at (.75\paperwidth,.9\paperheight) {};
              \draw[thick, grey] (j) -- (k) -- (i);

              \node[thick, grey,circle] (l) at (.8\paperwidth,1.1\paperheight) {};
              \draw[thick,grey] (k) -- (l) -- (g);
              \draw[thick,grey] (k)  -- (g);
              \node[thick, grey,circle] (m) at (.3\paperwidth,.6\paperheight) {};
              \draw[thick, grey] (h) -- (m) -- (c);

              \node[thick, grey,circle, fill] (n) at (.2\paperwidth,.05\paperheight) {};
              \draw[thick, grey] (c) -- (n) -- (a);
              \node[thick, grey,circle] (o) at (.6\paperwidth,-.1\paperheight) {};
              \draw[thick,grey] (a) -- (o) -- (b) ;
              \draw[thick,grey] (o) -- (n) ;

              \node[thick, grey,circle,fill] (p) at (.95\paperwidth,.45\paperheight) {};
              \node[thick, grey,circle,fill] (q) at (.95\paperwidth,.15\paperheight) {};
              \node[thick, grey,circle,fill] (r) at (1.1\paperwidth,.8\paperheight) {};
              \draw[thick,grey] (b) -- (p) -- (f);
              \draw[thick,grey] (p) -- (g);
              \draw[thick,grey] (b) -- (q);
              \draw[thick,grey] (l)--  (r) -- (g);
            \else
                  \node[opacity=.05,anchor=south west] at (0.45\paperwidth,.085\paperheight) {\includegraphics[height=0.8\paperheight]{img/coat_of_arms_grey.png}};
              \fill[darkgrey,opacity=1] (-1,0) -- (4.1,0) -- (8.1,1.1\paperheight) -- (-1,1.1\paperheight);
              \fill[grey,opacity=1] (-1,0) -- (3.8,0) -- (7.8,1.1\paperheight) -- (-1,1.1\paperheight);
            \fi
      \fill[red,opacity=1] (-1,0) -- (3.7,0) -- (7.7,1.1\paperheight) -- (-1,1.1\paperheight);

      % $ Double up looks nice$
      \node[white,anchor=north west, inner sep=0, text width = 6cm] at (-.9,0.98\paperheight){%
        \changefontsizes{8pt}
        \if@asFANS
          \large{ NSRG.\Module}
        \else
          \large{SCC.\Module}
        \fi
        \vspace{-.1cm}

        \emph{\bf\small\color{grey} \inserttitle}
      };
      \if@showContents
      \node[white,anchor=south west, inner sep=0, text width = 5cm] at (-.5,0.5){%

        \changefontsizes{11pt}
        {\tiny
        Summary \& Breakdown

        \vspace{-.15cm}

        \color{grey}

        \makebox[3cm]{\rule{0.25\paperwidth}{0.1pt}}\hfill
        \vspace{.05cm}

        \color{white}

          \tableofcontents
        }
      };
      \fi

      \node[darkgrey,anchor=south west, inner sep=0, text width = 6cm] at (0.44\paperwidth,0\paperheight){\changefontsizes{10pt}


        \if@asFANS

        \else
          \color{darkgrey}
          \ifdefined\Acknowledgement{\tiny


              \hfill Acknowledgements


              \hfill\scalebox{.8}{\Acknowledgement}

          }
        \fi
          \color{grey}
          \if@asFANS
          \else
          \hfill \makebox[3cm]{\rule{0.25\paperwidth}{0.1pt}}
          \color{darkgrey}
          \fi
        \fi

        \if@asFANS
          \color{white}
        \fi


        \hfill\insertauthor
        \vspace{-.1cm}
        \if@asFANS

          \else
            
        \color{darkgrey}
        \fi
        \emph{\tiny\hfill \Role} {\tiny{\Email}{@lancaster.ac.uk}}



        {\color{white}\tiny

            \hfill {\bf Formal Methods in Networked Systems}

          }

          \vspace{-.3cm}
        \hfill \date{\today}
        \if@showBib
          \printbibliography
          \makebox[3cm]{\rule{0.25\paperwidth}{0.1pt}}\hfill
        \fi

      };
    \fi
    \ifnum\thepage>1\relax

   \fi
  \end{tikzpicture}
}
